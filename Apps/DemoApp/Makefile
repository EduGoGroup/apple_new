# Makefile for DemoApp
# Swift 6.2 | iOS 26 / macOS 26 | Xcode 26

.PHONY: help run run-dev run-staging run-prod build clean test

# Default target
.DEFAULT_GOAL := help

## help: Show this help message
help:
	@echo "üì± DemoApp - EduGo Apple Application"
	@echo ""
	@echo "Usage:"
	@echo "  make run           Run app with Azure APIs (staging) - DEFAULT"
	@echo "  make run-dev       Run app with localhost APIs (development)"
	@echo "  make run-staging   Run app with Azure APIs (staging) - ALIAS"
	@echo "  make run-prod      Run app with production APIs"
	@echo "  make build         Build the app without running"
	@echo "  make clean         Clean build artifacts"
	@echo "  make test          Run all tests"
	@echo ""
	@echo "üåê Environments:"
	@echo "  ‚Ä¢ development: localhost:8060/8065/8070"
	@echo "  ‚Ä¢ staging:     Azure Container Apps (default)"
	@echo "  ‚Ä¢ production:  Production URLs"
	@echo ""
	@echo "üìñ See CONFIGURACION_AMBIENTES.md for details"

## run: Run app with Azure APIs (staging) - DEFAULT
run: run-staging

## run-staging: Run app with Azure APIs (staging)
run-staging:
	@echo "üöÄ Running DemoApp with Azure APIs (staging)..."
	@EDUGO_ENVIRONMENT=staging swift run

## run-dev: Run app with localhost APIs (development)
run-dev:
	@echo "üöÄ Running DemoApp with localhost APIs (development)..."
	@echo "‚ö†Ô∏è  Make sure your local APIs are running on ports 8060, 8065, 8070"
	@EDUGO_ENVIRONMENT=development swift run

## run-prod: Run app with production APIs
run-prod:
	@echo "üöÄ Running DemoApp with production APIs..."
	@EDUGO_ENVIRONMENT=production swift run

## build: Build the app without running
build:
	@echo "üî® Building DemoApp..."
	@swift build

## clean: Clean build artifacts
clean:
	@echo "üßπ Cleaning build artifacts..."
	@swift package clean
	@rm -rf .build

## test: Run all tests
test:
	@echo "üß™ Running tests..."
	@swift test
